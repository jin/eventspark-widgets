{
  "name": "Live Chat",
  "encoded_embed_code": "%20%20%3Cdiv%20class%3D%22chat%22%3E%0A%20%20%20%20%3Cdiv%20class%3D%22chat-overlay%22%3EConnecting...%3C/div%3E%0A%20%20%20%20%3Cdiv%20class%3D%22chat-logs%22%3E%0A%20%20%20%20%20%20%3Cdiv%20class%3D%22logs%22%3E%0A%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%3Ctextarea%20placeholder%3D%22Send%20a%20message%22%20class%3D%22message-box%22%20maxlength%3D%22300%22%20disabled%3E%3C/textarea%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%3C/div%3E%0A%20%20%3Cscript%3E%0A%20%20%24%28function%28%29%20%7B%0A%20%20%20%20initChat%28%29%3B%0A%20%20%7D%29%3B%0A%0A%20%20pubnub2%20%3D%20pubnub2.init%28%7B%0A%20%20%20%20publish_key%3A%20%27pub-c-37894458-4e2a-45b4-ab1e-b070b5926a7a%27%2C%0A%20%20%20%20subscribe_key%3A%20%27sub-c-a5790fae-7fbc-11e5-a4dc-0619f8945a4f%27%2C%0A%20%20%20%20%20%20%20%20ssl%3A%20true%2C%0A%20%20%20%20%20%20%20%20restore%3A%20true%0A%20%20%7D%29%3B%0A%0A%20%20function%20unsubscribeChat%28%29%20%7B%0A%20%20%20%20pubnub2.unsubscribe%28%7B%0A%20%20%20%20%20%20channel%20%3A%20%20%22griddit-chat%22+window.location.href.hashCode%28%29%0A%20%20%20%20%7D%29%3B%0A%20%20%7D%0A%0A%20%20function%20initChat%28%29%20%7B%0A%20%20%20%20var%20chat_username%20%3D%20typeof%20username%20%21%3D%3D%20%22undefined%22%3F%20username%3A%20%22Guest_%22+Math.floor%28%28Math.random%28%29%20*%2010000%29%20+%201%29%3B%0A%20%20%20%20var%20colors%20%3D%20%5B%22d-re%22%2C%22l-bl%22%2C%22mage%22%2C%22red%22%2C%22pink%22%2C%22blue%22%2C%22teal%22%2C%22oran%22%2C%22d-pu%22%5D%3B%0A%20%20%20%20var%20color%20%3D%20colors%5BMath.floor%28Math.random%28%29%20*%20colors.length%29%5D%3B%0A%0A%20%20%20%20function%20htmlEncode%28%20html%20%29%20%7B%0A%20%20%20%20%20%20return%20document.createElement%28%20%22a%22%20%29.appendChild%28%20%0A%20%20%20%20%20%20%20%20document.createTextNode%28%20html%20%29%20%29.parentNode.innerHTML%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20Date.prototype.timeNow%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20%20%20return%20%28%28this.getHours%28%29%20%3C%2010%29%3F%220%22%3A%22%22%29%20+%20this.getHours%28%29%20+%22%3A%22+%20%28%28this.getMinutes%28%29%20%3C%2010%29%3F%220%22%3A%22%22%29%20+%20this.getMinutes%28%29%20+%22%3A%22+%20%28%28this.getSeconds%28%29%20%3C%2010%29%3F%220%22%3A%22%22%29%20+%20this.getSeconds%28%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20getTime%28%29%20%7B%0A%20%20%20%20%20%20var%20currentTime%20%3D%20new%20Date%28%29.timeNow%28%29%3B%0A%20%20%20%20%20%20return%20currentTime%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20insertMessage%28%20message%20%29%20%7B%0A%20%20%20%20%20%20var%20elem%20%3D%20%24%28%22.logs%22%29%3B%0A%20%20%20%20%20%20var%20atBottom%20%3D%20%28elem%5B0%5D.scrollHeight%20-%20elem.scrollTop%28%29%20%3C%3D%20elem.outerHeight%28%29%20+%2020%20%29%3B%0A%20%20%20%20%20%20%24%28%22.logs%22%29.append%28message%29%3B%20%0A%20%20%20%20%20%20if%20%28atBottom%29%20%7B%0A%20%20%20%20%20%20%20%20elem.scrollTop%28elem%5B0%5D.scrollHeight%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20%24%28%22.message-box%22%29.on%28%22keypress%22%2C%20function%28event%29%20%7B%0A%20%20%20%20%20%20var%20key%20%3D%20event.keyCode%3B%0A%20%20%20%20%20%20var%20message%20%3D%20%24.trim%28%24%28%22.message-box%22%29.val%28%29%29%3B%0A%20%20%20%20%20%20if%20%28key%20%3D%3D%2013%20%26%26%20%21event.shiftKey%20%26%26%20message%20%21%3D%3D%20%22%22%29%20%7B%0A%20%20%20%20%20%20%20%20pubnub2.publish%28%7B%0A%20%20%20%20%20%20%20%20%20%20channel%20%3A%20%20%22griddit-chat%22+window.location.href.hashCode%28%29%2C%0A%20%20%20%20%20%20%20%20%20%20message%20%3A%20%5Bchat_username%2Cmessage%2Ccolor%5D%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%24%28%22.message-box%22%29.val%28%22%22%29%3B%0A%20%20%20%20%20%20%20%20event.preventDefault%28%29%3B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20function%20connected%28m%29%20%7B%0A%20%20%20%20%20%20%24%28%27.chat-overlay%27%29.hide%28%29%3B%0A%20%20%20%20%20%20%24%28%27.message-box%27%29.prop%28%22disabled%22%2Cfalse%29%3B%0A%20%20%20%20%20%20pubnub2.history%28%7B%0A%20%20%20%20%20%20%20%20channel%3A%20%22griddit-chat%22+window.location.href.hashCode%28%29%2C%0A%20%20%20%20%20%20%20%20callback%3A%20function%28m%29%7B%0A%20%20%20%20%20%20%20%20%20%20var%20startDate%20%3D%20new%20Date%28parseInt%28m%5B1%5D%29/10000%29%3B%0A%20%20%20%20%20%20%20%20%20%20var%20endDate%20%3D%20new%20Date%28parseInt%28m%5B2%5D%29/10000%29%3B%0A%20%20%20%20%20%20%20%20%20%20insertMessage%28%22%3Cdiv%20class%3D%5C%22info%5C%22%3EShowing%20message%20history%20starting%20from%20%22+startDate+%22%3C/div%3E%22%29%3B%0A%20%20%20%20%20%20%20%20%20%20m%5B0%5D.forEach%28function%28msg%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20message%28msg%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20insertMessage%28%22%3Cdiv%20class%3D%5C%22info%5C%22%3EEnd%20of%20message%20history%20from%20%22+startDate+%22%20to%20%22+endDate+%22.%3C/div%3E%22%29%3B%0A%20%20%20%20%20%20%20%20%20%20insertMessage%28%22%3Cdiv%20class%3D%5C%22info%5C%22%3EWelcome%20to%20the%20chat%20room%21%3C/div%3E%22%29%3B%20%0A%20%20%20%20%20%20%20%20%20%20insertMessage%28%22%3Cdiv%20class%3D%5C%22info%5C%22%3EYou%20are%20%22+chat_username+%22.%20Login%20to%20get%20your%20own%20username%21%3C/div%3E%22%29%3B%20%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20count%3A%20100%2C%20//%20100%20is%20the%20default%0A%20%20%20%20reverse%3A%20false%20//%20false%20is%20the%20default%0A%7D%29%3B%20%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20message%28m%29%20%7B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20insertMessage%28%22%3Cdiv%20class%3D%5C%22messages%5C%22%3E%3Cspan%20class%3D%5C%22time%5C%22%3E%22+getTime%28%29+%22%3C/span%3E%3Cspan%20class%3D%5C%22author%20chat-%22+htmlEncode%28m%5B2%5D.substring%280%2C4%29%29+%22%5C%22%3E%22+htmlEncode%28m%5B0%5D.substring%280%2C20%29%29+%22%3C/span%3E%3A%20%22+htmlEncode%28m%5B1%5D.substring%280%2C300%29%29+%22%3C/div%3E%22%29%3B%0A%20%20%20%20%20%20%7D%20catch%20%28e%29%7B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20pubnub2.subscribe%28%7B%0A%20%20%20%20%20%20channel%20%3A%20%20%22griddit-chat%22+window.location.href.hashCode%28%29%2C%0A%20%20%20%20%20%20%27message%27%20%3A%20function%28m%29%20%7B%20message%28m%29%3B%20%7D%2C%0A%20%20%20%20%20%20%27connect%27%20%3A%20function%28m%29%20%7B%20connected%28m%29%3B%20%7D%2C%0A%20%20%20%20%20%20%27presence%27%20%3A%20function%28m%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28m.action%20%3D%3D%3D%20%22join%22%20%26%26%20m.data%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20insertMessage%28%22%3Cdiv%20class%3D%5C%22info%5C%22%3E%22+htmlEncode%28m.data.username.substring%280%2C20%29%29+%22%20has%20entered%20the%20chatroom%21%3C/div%3E%22%29%3B%20%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20%28m.action%20%3D%3D%3D%20%22leave%22%20%7C%7C%20m.action%20%3D%3D%3D%20%22timeout%22%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20insertMessage%28%22%3Cdiv%20class%3D%5C%22info%5C%22%3E%22+htmlEncode%28m.data.username.substring%280%2C20%29%29+%22%20has%20left%20the%20chatroom%21%3C/div%3E%22%29%3B%20%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%27disconnect%27%20%3A%20function%28m%29%20%7B%0A%20%20%20%20%20%20%20%20insertMessage%28%22%3Cdiv%20class%3D%5C%22info%5C%22%3EYou%27ve%20been%20disconnected%21%3C/div%3E%22%29%3B%20%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%27reconnect%27%20%3A%20function%28m%29%20%7B%0A%20%20%20%20%20%20%20%20insertMessage%28%22%3Cdiv%20class%3D%5C%22info%5C%22%3EYou%27ve%20been%20reconnected%20to%20the%20channel%21%3C/div%3E%22%29%3B%20%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%27state%27%20%3A%20%7B%0A%20%20%20%20%20%20%20%20username%3A%20chat_username%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%29%3B%20%0A%20%20%7D%0A%20%20%3C/script%3E",
  "image_url": "http://res.cloudinary.com/eventspark3216/image/upload/v1446467761/eventspark/widget-chat-medium.png",
  "image_thumb_url": "http://res.cloudinary.com/eventspark3216/image/upload/v1446467277/widget-chat-small_fawhkx.png",
  "variables": {
  }
}
